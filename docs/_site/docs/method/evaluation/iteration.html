<!DOCTYPE html>
<html lang="de-DE">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/pp-voiceassistant/assets/css/main.css">
    <link rel="stylesheet" href="/pp-voiceassistant/assets/css/font-awesome.min.css">

    <link rel="shortcut icon" href="/pp-voiceassistant/favicon.ico?1">
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Änderungen am Skillverwaltungssystem | Praxisprojekt Sprachassistent</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Änderungen am Skillverwaltungssystem" />
<meta property="og:locale" content="de_DE" />
<meta name="description" content="Das Skillverwaltungssystem von Finn Wehn wurde iteriert. So wurde versucht alle identifizierten Probleme zu lösen." />
<meta property="og:description" content="Das Skillverwaltungssystem von Finn Wehn wurde iteriert. So wurde versucht alle identifizierten Probleme zu lösen." />
<link rel="canonical" href="http://localhost:4000/pp-voiceassistant/docs/method/evaluation/iteration" />
<meta property="og:url" content="http://localhost:4000/pp-voiceassistant/docs/method/evaluation/iteration" />
<meta property="og:site_name" content="Praxisprojekt Sprachassistent" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-02-02T18:00:49+01:00" />
<script type="application/ld+json">
{"description":"Das Skillverwaltungssystem von Finn Wehn wurde iteriert. So wurde versucht alle identifizierten Probleme zu lösen.","url":"http://localhost:4000/pp-voiceassistant/docs/method/evaluation/iteration","@type":"WebPage","headline":"Änderungen am Skillverwaltungssystem","dateModified":"2023-02-02T18:00:49+01:00","datePublished":"2023-02-02T18:00:49+01:00","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="alternate" type="application/rss+xml" title="Praxisprojekt Sprachassistent" href="http://localhost:4000/pp-voiceassistant/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
            <a class="navbar-brand" href="/pp-voiceassistant/">
                <span><img src="/pp-voiceassistant/assets/img/logonav.png" alt="Logo"></span> Praxisprojekt Sprachassistent
            </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/pp-voiceassistant/docs/home/">Docs</a></li>
<!--                <li ><a href="">Blog</a></li>-->
            </ul>
            <div class="navbar-right">
<!--                <form class="navbar-form navbar-left">-->
<!--                    <div class="form-group has-feedback">-->
<!--                        <input id="search-box" type="search" class="form-control" placeholder="Search...">-->
<!--                        <i class="fa fa-search form-control-feedback"></i>-->
<!--                    </div>-->
<!--                </form>-->
                <ul class="nav navbar-nav">
                    <li><a href="https://github.com/sjohannsen1/pp-voiceassistant"><i class="fa fa-github" aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>


    <div class="page-content">
        <div class="wrapper">
            <div class="container">
    <div class="row">
        <div class="col-md-4">
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="false" aria-controls="collapse-1">
            Willkommen
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-1" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href="/pp-voiceassistant/docs/home/">Willkommen</a>
          
        </div>
      </div>
    </div>
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2">
            Installation
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-2" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href="/pp-voiceassistant/docs/installation/Zigbee2MQTT/">Installation Zigbee2MQTT</a>
          
        </div>
      </div>
    </div>
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-3" aria-expanded="false" aria-controls="collapse-3">
            Skills
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-3" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href=""></a>
          
            
            
            <a class="list-group-item " href=""></a>
          
        </div>
      </div>
    </div>
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-4" aria-expanded="false" aria-controls="collapse-4">
            Fazit
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-4" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <a class="list-group-item " href="/pp-voiceassistant/docs/conclusion/conclusion/">Fazit</a>
          
        </div>
      </div>
    </div>
  
</div>

        </div>

        <div class="col-md-8">
            <h1>Änderungen am Skillverwaltungssystem</h1>
            <div id="markdown-content-container"><p>Das Skillverwaltungssystem von Finn Wehn wurde iteriert. So wurde versucht alle identifizierten Probleme zu lösen.</p>

<h2 id="sprachunabhängigkeit">Sprachunabhängigkeit</h2>

<p>Wie in der Evaluation angemerkt, war die Sprachunabhängigkeit schon gegeben. Um mehrere verschiedene Antworten von einem Skill zu ermöglichen, wurde die einzelne Antwort durch eine Liste an Antworten ersetzt. Wenn nun eine Antwort generiert werden soll, muss ein Index mit angegeben werden. Die Funktion zur Generation wurde um diesen Parameter erweitert. <br /></p>

<p>Außerdem ist eine Funktion zur Generation von Aufzählungen aus Listen hinzugefügt worden.</p>

<h2 id="nodejs-module">NodeJS-Module</h2>

<p>Bei der Installation eines Skills wird nun die <code class="language-plaintext highlighter-rouge">Manifest</code>-Datei eingelesen, die Module daraus extrahiert und dann installiert. Erst danach wird die Installation des Skills fortgesetzt. Dazu wurde eine neue Funktion des Skillmanagers erstellt und von der Weboberfläche sowie der Befehlszeilenschnittstelle verwendet.</p>

<h2 id="umgebungsvariablen">Umgebungsvariablen</h2>

<p>Um die Umgebungsvariablen für das Programm zugänglich zu machen, wurden die Skripte zum Starten des Clients und des Servers um die Initialisierung des “dotenv”-Moduls erweitert. Dieses lädt die Variablen in die Prozessumgebung, sodass Programme auf diese zugreifen können.</p>

<h2 id="fehlerbehandlung">Fehlerbehandlung</h2>

<p>Um ausschlagkräftigere Fehlermeldungen zu ermöglichen und dennoch sprachunabhängigen Code beizubehalten, wurde jeder Sprachbefehl um eine Liste an Fehlermeldungen erweitert. Diese orientieren sich am Vorbild der Antworten. Deswegen wurde in der CustomSDK noch eine Funktion zur Generation von Fehlermeldungen eingerichtet. Tritt nun ein Fehler auf kann er von der Fehlerbehandlung der CustomSDK aufgefangen werden und eine Fehlernachricht generiert und von Rhasspy gesagt werden. Es wird weiterhin der eigentliche Fehler in der Konsole ausgegeben.</p>

<h2 id="dynamische-slots">Dynamische Slots</h2>

<p>Dynamische Sloteinträge können sowohl beim Aktivieren von Skills Konfigurationsdateien ausgelesen und an Rhasspy gepostet werden als auch durch einen Chatbot hinzugefügt werden. Um dies umzusetzen, musste zunächst das Konfigurationsobjekt der <code class="language-plaintext highlighter-rouge">CustomSDK</code> um Liste mit den dynamischen Slots der einzelnen Skills erweitert werden. Die Namen der Slots werden aus den <code class="language-plaintext highlighter-rouge">Manifest</code>-Datei jedes Skills ausgelesen und das Konfigurationsobjekt beim Laden der Skills damit gefüllt. Die Werte, die die Slots annehmen können, werden aus Rhasspy ausgelesen und anhand der vorher ermittelten Namen in die Liste einsortiert. Außerdem erhält das Konfigurationsobjekt eine Funktion zum Posten der Slots. Wenn nun ein neuer Slot Eintrag hinzugefügt werden soll, wird dieser zunächst an Rhasspy gepostet. Danach wird Rhasspy neu trainiert und die Werte im Konfigurationsobjekt  aktualisiert. <br /></p>

<p>In den <code class="language-plaintext highlighter-rouge">locale</code>-Dateien jedes Skills müssen die Slots trotzdem eingetragen werden. Da die Werte sofort überschrieben werden, kann da als Platzhalter ein Unterstrich eingegeben werden. Wenn dieser Eintrag vergessen wird, lässt sich Rhasspy nicht trainieren. <br /></p>

<p>Aus dem Slot <code class="language-plaintext highlighter-rouge">zigbeeDevices</code> wurden die Gruppen entfernt. Diese werden nun in einem separaten Slot namens <code class="language-plaintext highlighter-rouge">zigbee_groups</code> gespeichert. Wie der ursprüngliche Slot erhalten diese auch einen Eintrag im Konfigurationsobjekt der <code class="language-plaintext highlighter-rouge">CustomSDK</code>. Durch diese Änderungen können nun Gruppen im Skill Zigbee2MQTT verwaltet werden.</p>

<h2 id="detailseite">Detailseite</h2>

<p>Mithilfe der Eigenschaft <code class="language-plaintext highlighter-rouge">custom_slots</code> des Konfigurationsobjektes, welche die dynamischen Slots nach Skill geordnet enthält, können diese jedem Skill eindeutig zugeordnet werden. Wird nun die Detailseite aufgerufen, werden die Slots dort ausgelesen. Gibt es für einen Slot mehr als fünf Einträge, wird eine zufällige Auswahl daraus angezeigt. Die weiteren Einträge der Detailseite sind beibehalten worden.</p>
</div>
            <div style="clear:both;">
              <p class="text-center">
                <br />
                <a target="_blank" href="https://github.com/sjohannsen1/pp-voiceassistant/tree/main/docs/_docs/method/evaluation/iteration.md" class="btn btn-default" role="button">
                  <i class="fa fa-pencil fa-lg"></i> Improve this page
                </a>
              </p>
            </div>
            <hr>
            





  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  


        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            Praxisprojekt Sprachassistent 2023 |
            Powered by <a href="https://github.com/aksakalli/jekyll-doc-theme">Jekyll Doc Theme</a>
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = '/pp-voiceassistant'
</script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="/pp-voiceassistant/assets/js/bootstrap.min.js "></script>
<script src="/pp-voiceassistant/assets/js/typeahead.bundle.min.js "></script>

<script src="/pp-voiceassistant/assets/js/main.js "></script>

</body>

</html>
